---
- hosts: vsds
  gather_facts: no
  any_errors_fatal: true
  vars:
    report_filename: vsd_ha_node1_3_pre_upgrade_report.txt
  roles:
    - vsd-health

- hosts: vsd_ha_node1
  gather_facts: no
  any_errors_fatal: true
  roles:
    - vsd-dbbackup

- hosts: vsd_ha_node2
  gather_facts: no
  any_errors_fatal: true
  vars:
    report_filename: vsd_decluster_report.txt
  roles:
    - vsd-decouple
 
- hosts: vsd_ha_node1:vsd_ha_node3
  gather_facts: no
  roles:
    - vsd-upgrade

- hosts: vsds
  gather_facts: no
  any_errors_fatal: true
  vars:
    report_filename: vsd_ha_node1_3_post_upgrade_report.txt
  roles:
    - vsd-health
