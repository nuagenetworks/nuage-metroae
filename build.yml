---
- hosts: localhost

  pre_tasks:
    
    - name: Set build_vars variable
      set_fact: 
        build_vars: "{{ build_vars_file | default ('build_vars.yml') }}"

    - name: Check YAML syntax
      yaml_checker: 
        path: "{{ build_vars }}"

    - name: Check build_vars.yml
      build_vars_checker: 
        path: "{{ build_vars }}"

    - name: Include build variable files
      include_vars: "{{ build_vars }}"
  roles:
    - nuage-predeploy
    - validate-build-vars
    - build
