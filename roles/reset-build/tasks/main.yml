---
- name: Warning! About to overwrite build_vars.yml, delete hosts, and delete host_vars. Customizations to thos files will be lost.
  pause:
    seconds: "{{ reset_build_pause_secs }}"
  when: not no_pause | default('False')

- name: Destroy build_vars md5 file
  file: path={{ playbook_dir }}/build_vars.md5 state=absent

- name: Destroy the host_vars directory and its contents
  file: path={{ playbook_dir }}/host_vars/ state=absent

- name: Destroy the group_vars directory and its contents
  file: path={{ playbook_dir }}/group_vars/ state=absent

- name: Write out a clean build_vars.yml file to the playbook directory and backup previous
  copy: src=build_vars.yml dest={{ playbook_dir }}/build_vars.yml backup=yes

- name: Write out a clean upgrade_vars.yml file to the playbook directory and backup previous
  copy: src=upgrade_vars.yml dest={{ playbook_dir }}/upgrade_vars.yml backup=yes

- name: Destroy hosts file in the playbook directory
  file: path={{ playbook_dir }}/hosts state=absent

- name: Write out a clean hosts file to the playbook directory
  copy: src=hosts dest={{ playbook_dir }}/hosts
