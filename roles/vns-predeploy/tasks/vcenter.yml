---
- name: Verify the VSD VM exists
  connection: local
  vmware_guest:
    hostname: "{{ target_server }}"
    username: "{{ vcenter.username }}"
    password: "{{ vcenter.password }}"
    name: "{{ vsd_fqdn }}"
    validate_certs: no
    state: gatherfacts
  register: vsd_vm_facts

- name: Verify the VSC VM exists
  connection: local
  vmware_guest:
    hostname: "{{ target_server }}"
    username: "{{ vcenter.username }}"
    password: "{{ vcenter.password }}"
    name: "{{ inventory_hostname }}"
    validate_certs: no
    state: gatherfacts
  register: vsc_vm_facts
