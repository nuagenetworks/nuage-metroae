# *** WARNING ***
# This file is automatically generated by build.yml.
# Changes made to this file may be overwritten.
#
[all_servers:vars]
ansible_ssh_private_key_file = {{ user_ssh_priv_key | default('~/.ssh/id_rsa')}}

[all_servers:children]
{% if myvsds is defined and myvsds %}
vsds
{% endif %}
{% if myvcins is defined and myvcins %}
vcins
{% endif %}
{% if myvscs is defined and myvscs %}
vscs
{% endif %}
{% if myvnsutils is defined and myvnsutils %}
vnsutils
{% endif %}
{% if mynsgvs is defined and mynsgvs %}
nsgvs
{% endif %}
{% if myvstats is defined and myvstats %}
vstats
{% endif %}
{% if myvrss is defined and myvrss %}
vrss
{% endif %}

{% if myvsds is defined and myvsds %}
{% if myvsds|length == 1 %}
[vsds]
{% for vsd in myvsds %}
{{ vsd.vmname | default(vsd.hostname) }}
{% endfor %}
{% endif %}
{% if myvsds|length == 3 %}
[vsd_ha_node1]
{{ myvsds[0].vmname | default(myvsds[0].hostname) }}
[vsd_ha_node2]
{{ myvsds[1].vmname | default(myvsds[1].hostname) }}
[vsd_ha_node3]
{{ myvsds[2].vmname | default(myvsds[2].hostname) }}
[vsds:children]
vsd_ha_node1
vsd_ha_node2
vsd_ha_node3
{% endif %}
{% endif %}

{% if myvcins is defined and myvcins %}
[vcins]
{% for vcin in myvcins %}
{{ vcin.hostname }}
{% endfor %}
{% endif %}

{% if myvscs is defined and myvscs %}
[vsc_ha_node1]
{% for vsc in myvscs %}
{% if vsc.role is defined and vsc.role == 'primary' %}
{{ vsc.hostname }}
{% elif loop.index0 % 2 == 0 and vsc.role is undefined %}
{{ vsc.hostname }}
{% endif %}
{% endfor %}
[vsc_ha_node2]
{% for vsc in myvscs %}
{% if vsc.role is defined and vsc.role == 'secondary' %}
{{ vsc.hostname }}
{% elif loop.index0 % 2 > 0 and vsc.role is undefined %}
{{ vsc.hostname}}
{% endif %}
{% endfor %}
[vscs:children]
vsc_ha_node1
vsc_ha_node2
{% endif %}

{% if myvnsutils is defined and myvnsutils %}
[vnsutils]
{% for vnsutil in myvnsutils %}
{{ vnsutil.hostname }}
{% endfor %}
{% endif %}

{% if mynsgvs|length is defined and mynsgvs%}
[nsgvs]
{% for nsgv in mynsgvs %}
{{ nsgv.hostname }}
{% endfor %}
{% endif %}

{% if myvstats is defined and myvstats %}
[vstats]
{% for vstat in myvstats %}
{{ vstat.hostname }}
{% endfor %}
{% endif %}

{% if myvrss is defined and myvrss %}
[vrss]
{% for vrs_dict_list in myvrss %}
{% for vrs_dict in vrs_dict_list['vrs_ip_list'] %}
{{ vrs_dict }}
{% endfor %}
{% endfor %}
{% endif %}

[ansible_deployment_host]
{{ ansible_deployment_host }}
