---
- name: Set myvrss_check
  set_fact: myvrss_check={{ myvrss is defined }}

- name: Assign empty dict to myvrss if it is undefined
  set_fact:
    myvrss: "{{ myvrss|default({}) }}"
  when: not myvrss_check

- block:
  - name: Create host_vars files for vrs/dockermon
    template: src=vrs.j2 backup=no dest={{ playbook_dir }}/host_vars/{{ item.1 }}
    with_subelements: 
        - "{{ myvrss }}"
        - vrs_ip_list
  when: myvrss_check
