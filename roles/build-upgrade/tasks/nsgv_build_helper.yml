---
- name: Set mynsgvs_check
  set_fact: mynsgvs_check={{mynsgvs is defined}}

- name: Assign empty list to mynsgvs if it is undefined
  set_fact: mynsgvs= default([])
  when: not mynsgvs_check

- name: Create host_vars files for nsgv
  template: src=nsgv.j2 backup=no dest={{ playbook_dir }}/host_vars/{{ item.hostname }}
  with_items: "{{ mynsgvs }}"
  when: mynsgvs_check
