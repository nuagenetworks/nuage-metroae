---
- name: Set myvsds_check
  set_fact: myvsds_check={{myvsds is defined}}

- name: Assign empty list to myvsds if it is undefined
  set_fact: myvsds= default([])
  when: not myvsds_check

- name: Create host_vars files for vsd
  template: src=vsd.j2 backup=no dest={{ playbook_dir }}/host_vars/{{ item.vmname | default(item.hostname) }}
  with_items: "{{ myvsds }}"
  when: myvsds_check
