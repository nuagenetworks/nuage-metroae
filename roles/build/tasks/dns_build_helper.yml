---
- name: Set mydns_check
  set_fact: mydns_check={{mydnss is defined}}

- name: Assign empty list to mydnss if it is undefined 
  set_fact: mydnss= default([])
  when: not mydns_check

- name: Create host_vars files for dns
  template: src=dns.j2 backup=no dest={{ playbook_dir }}/host_vars/{{ item.hostname }}
  with_items: "{{ mydnss }}"
  when: mydns_check
