---

- name: Check for supported host OS on Ansible host
  assert: 
    that: "{{ ansible_os_family | match('RedHat') }}"
    msg:  "Metro only supports RHEL/CentOS as an Ansible host"

- name: Define list of required packages
  set_fact:
    prereqs:
      - python-pip
# ... add more packages here...

- name: Get installed packages
  yum:  list=installed
  register: yum_packages
  changed_when: False

- name: Check that all required packages are installed
  assert:
    that: "{{ item in yum_packages }}"
    msg:  "Missing required package: {{ item }}. Please refer to metro-setup.sh"
  with_items: "{{ yum_packages }}"
  
