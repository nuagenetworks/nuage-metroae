---
- name: Check that from version is set
  assert:
    that: "upgrade_from_version is defined"
    msg: "Upgrade from version is missing"

- name: Check that to version is set
  assert:
    that: "upgrade_to_version is defined"
    msg: "Upgrade to version is missing"

- block:

  - name: Check that VSTAT in place upgrade is set
    assert:
      that: "vstat_in_place_upgrade is defined"
      msg: "vstat_in_place_upgrade is missing"

  - name: Check that VSTAT backup scripts path is defined
    assert:
      that: "vstat_in_place_upgrade or vstat_backup_scripts_path is defined"
      msg: "vstat_backup_scripts_path is missing"

  - name: Check that VSTAT backup scripts files are defined
    assert:
      that: "vstat_in_place_upgrade or vstat_backup_scripts_file_list is defined"
      msg: "vstat_backup_scripts_file_list is missing"

  - name: Check that VSTAT upgrade scripts path is defined
    assert:
      that: "not vstat_in_place_upgrade or vstat_upgrade_scripts_path is defined"
      msg: "vstat_upgrade_scripts_path is missing"

  - name: Check that VSTAT upgrade scripts file is defined
    assert:
      that: "not vstat_in_place_upgrade or vstat_upgrade_scripts_file is defined"
      msg: "vstat_upgrade_scripts_file is missing"

  when: component_type | default("NONE") == 'vstat'
