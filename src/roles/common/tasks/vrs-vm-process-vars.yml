---
- name: Set myvrs_vms
  set_fact: myvrs_vms_check={{ myvrs_vms is defined }}

- name: Assign empty list to myvrs_vms if it is undefined
  set_fact: myvrs_vms= default([])
  when: not myvrs_vms_check

- name: Create host_vars files for vrs_vms
  template: src=vrs_vm.j2 backup=no dest={{ playbook_dir }}/host_vars/{{ item.hostname }}
  with_items: "{{ myvrs_vms }}"
  when: myvrs_vms_check
