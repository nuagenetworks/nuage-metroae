---
- name: Get the data IP address for the data FQDN
  shell: "getent hosts {{ item.data_fqdn }} | awk '{print $1}'"
  register: data_fqdn_ip
  changed_when: False

- name: Ensure that the data FQDN maps to the proper data IP
  assert:
    that: "'{{ data_fqdn_ip.stdout }}' ==  '{{ item.data_ip }}'"
    msg: "IPv4 address for {{ item.data_fqdn }} != {{ item.data_ip }}"
