---
# *** WARNING ***
# This file is automatically generated by build.yml.
# Changes made to this file may be overwritten.
#

user_ssh_pub_key: {{ user_ssh_pub_key | default('~/.ssh/id_rsa.pub') }}

xmpp_tls: {{ xmpp_tls | default(True) }}
openflow_tls: {{ openflow_tls | default(True) }}

vsd_fallocate_size_gb: {{ vsd_fallocate_size_gb | default(285) }}
vsc_fallocate_size_gb: {{ vsc_fallocate_size_gb | default(0) }}
vsd_ram: "{{ vsd_ram | default(24) }}"
vsc_ram: "{{ vsc_ram | default(4) }}"
vstat_ram: "{{ vstat_ram | default(16) }}"
vcin_ram: "{{ vcin_ram | default(24) }}"
portal_ram: "{{ portal_ram | default(24) }}"
portal_license_file: "{{ portal_license_file | default('NONE') }}"
vsd_license_required_days_left: {{ vsd_license_required_days_left | default(-1) }}
vsd_fqdn: {{ vsd_fqdn_global | default('NONE') }}
portal_fqdn_global: {{ portal_fqdn_global | default('NONE') }}
vstat_fqdn_global: {{ vstat_fqdn_global | default('NONE') }}
mgmt_bridge: {{ mgmt_bridge | default('NONE') }}
data_bridge: {{ data_bridge | default('NONE') }}
access_bridge: {{ access_bridge | default('NONE') }}
images_path: {{ images_path | default('/var/lib/libvirt/images') }}
ansible_deployment_host: {{ ansible_deployment_host|default('127.0.0.1') }}
vsdbackup_dir: {{ vsdbackup_path|default('/tmp/vdsbackup') }}

vsc_command_timeout_seconds: "{{ vsc_command_timeout_seconds|default(180) }}"
vsc_scp_timeout_seconds: "{{ vsc_scp_timeout_seconds|default(720) }}"

{% if ntp_server_list  is defined %}
ntp_server_list:
{% for server in ntp_server_list %}
  - {{ server }}
{% endfor %}
{% endif %}

{% if dns_server_list  is defined %}
dns_server_list:
{% for server in dns_server_list %}
  - {{ server }}
{% endfor %}
{% endif %}

dns_domain: {{ dns_domain | default('localdomain') }}
timezone: {{ timezone | default('US/Pacific') }}
yum_proxy: "{{ yum_proxy | default('NONE') }}"
yum_update: {{ yum_update | default(True) }}

vcenter_global:
  ovftool: {{ vcenter_ovftool | default('/usr/bin/ovftool') }}

{% if nuage_software_version is defined %}
nuage_software_version: {{ nuage_software_version }}
{% endif %}
{% if upgrade_from_version is defined %}
upgrade_from_version: {{ upgrade_from_version }}
{% endif %}
{% if upgrade_to_version is defined %}
upgrade_to_version: {{ upgrade_to_version }}
{% endif %}

vstat_default_username: "root"
vstat_default_password: "Alcateldc"

vsd_default_username: root
vsd_default_password: Alcateldc

vsc_default_username: admin
vsc_default_password: admin

vcin_default_username: root
vcin_default_password: Alcateldc

vnsutil_default_username: root
vnsutil_default_password: Alcateldc

portal_default_username: root
portal_default_password: Alcateldc

dns_username: {{ dns_username | default("root") | indent(8, False) }}
dns_password: {{ dns_password | default("Alcateldc") | indent(8, False) }}

metro_reports_dir: {{ metro_reports_dir | default(playbook_dir + "/reports") }}
failure_report_path: {{ playbook_dir  + "/failure_report.log" }}

expected_bgp_admin_state: Up
expected_bgp_oper_state: Up
expected_xmpp_server_state: Functional

target_server_username: "{{ encrypted.target_server_username | default("root") | indent(8, False) }}"

{% if encrypted.target_server_password is defined %}
target_server_password: {{ encrypted.target_server_password | indent(8, False) }}
{% endif %}

compute_username: "{{ encrypted.compute_username | default(encrypted.target_server_username | default("root"))}}"
{% if encrypted.compute_password is defined %}
compute_password: {{ encrypted.compute_password | indent(8, False) }}
{% endif %}


vsd_auth:
  username: {{ encrypted.vsd_auth_username | default("csproot") | indent(8, False) }}
  password: {{ encrypted.vsd_auth_password | default("csproot") | indent(8, False) }}
  enterprise: "{{ vsd_auth_enterprise | default("csp") }}"
  api_url: "{{ vsd_auth_url | default("https://" + vsd_fqdn_global + ":8443") }}"

vcin_auth:
  api_username: {{ encrypted.vcin_auth_username | default("csproot") | indent(8, False) }}
  api_password: {{ encrypted.vcin_auth_password | default("csproot") | indent(8, False) }}
  api_enterprise: {{ vcin_auth_enterprise | default("csp") }}
  {% if vcin_api_url is defined %}
  api_url: {{ vcin_auth_url }}
  {% endif %}

{% if encrypted.vsd_mysql_password is defined %}
vsd_mysql_password: {{ encrypted.vsd_mysql_password | indent(8, False) }}
{% endif %}
{% if encrypted.ejabberd_id_password is defined %}
ejabberd_id_password: {{ encrypted.ejabberd_id_password | indent(8, False) }}
{% endif %}

portal_auth:
  username: {{ encrypted.portal_username | default("csproot") | indent(8, False) }}
  password: {{ encrypted.portal_password | default("csproot") | indent(8, False) }}

{% if encrypted.vsd_custom_username is defined %}
vsd_custom_username: {{ encrypted.vsd_custom_username | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_custom_password is defined %}
vsd_custom_password: {{ encrypted.vsd_custom_password | indent(8, False) }}
{% endif %}

{% if encrypted.vstat_custom_username is defined %}
vstat_custom_username: {{ encrypted.vstat_custom_username | indent(8, False) }}
{% endif %}
{% if encrypted.vstat_custom_password is defined %}
vstat_custom_password: {{ encrypted.vstat_custom_password | indent(8, False) }}
{% endif %}

{% if encrypted.vsc_custom_username is defined %}
vsc_custom_username: {{ encrypted.vsc_custom_username | indent(8, False) }}
{% endif %}
{% if encrypted.vsc_custom_password is defined %}
vsc_custom_password: {{ encrypted.vsc_custom_password | indent(8, False) }}
{% endif %}

{% if nuage_unzipped_files_dir is defined %}
metro_backup_root: "{{ metro_backup_root | default( nuage_unzipped_files_dir + "/backups" ) }}"
{% else %}
metro_backup_root: "{{ metro_backup_root | default( "/tmp/metro-backups" ) }}"
{% endif %}

{% if branding_zip_file is defined %}
branding_zip_file: {{ branding_zip_file }}
{% endif %}

{% if encrypted.vsd_cna_password is defined %}
cnaPwd: {{ encrypted.vsd_cna_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_ejbca_password is defined %}
ejbcaPwd: {{ encrypted.vsd_ejbca_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_amp_password is defined %}
ampPwd: {{ encrypted.vsd_amp_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_repl_password is defined %}
replPwd: {{ encrypted.vsd_repl_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_admin_password is defined %}
adminPwd: {{ encrypted.vsd_admin_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_monit_password is defined %}
monitPwd: {{ encrypted.vsd_monit_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_keystore_password is defined %}
keyStorePwd: {{ encrypted.vsd_keystore_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_truststore_password is defined %}
trustStorePwd: {{ encrypted.vsd_truststore_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_jrestore_password is defined %}
jreStorePwd: {{ encrypted.vsd_jrestore_password | indent(8, False) }}
{% endif %}
{% if encrypted.vsd_keyserverstore_password is defined %}
keyServerStorePwd: {{ encrypted.vsd_keyserverstore_password | indent(8, False) }}
{% endif %}

{% if encrypted.aws_access_key is defined %}
aws_access_key: {{ encrypted.aws_access_key | indent(8, False) }}
{% endif %}
{% if encrypted.aws_secret_key is defined %}
aws_secret_key: {{ encrypted.aws_secret_key | indent(8, False) }}
{% endif %}

{% if encrypted.openstack_username is defined %}
openstack_auth:
  username: {{ encrypted.openstack_username | indent(8, False) }}
  password: {{ encrypted.openstack_password | indent(8, False) }}
  project_name: {{ openstack_project_name }}
  auth_url: {{ openstack_auth_url }}
{% endif %}

{% set zfb_nsg_list = nsgvs | selectattr("bootstrap_method", "equalto", "zfb_metro") | list %}

{% if vsd_standard_license_file is defined %}
vsd_standard_license_file: {{ vsd_standard_license_file }}
{% endif %}

{% if vsd_cluster_license_file is defined %}
vsd_cluster_license_file: {{ vsd_cluster_license_file }}
{% endif %}

{% if zfb_nsg_list | length > 0 %}
zfb_proxy_user:
    firstName: {{ proxy_user_first_name }}
    lastName: {{ proxy_user_last_name }}
    email: {{ proxy_user_email }}
    password: {{ encrypted.proxy_user_password | indent(8, False) }}
{% endif %}

{% if stcvs is defined and stcvs | length > 0 %}
stcv_image_path: {{ stcv_image_path }}
stcv_image_filename: {{ stcv_image_filename }}
spirent_license_server: {{ spirent_license_server }}
{% endif %}

{% if portals is defined and portals %}

{% if portals|length == 1 %}
portal_ip: {{ portals[0].mgmt_ip }}

{% else %}

portal1_ip: {{ portals[0].mgmt_ip }}

portal2_ip: {{ portals[1].mgmt_ip }}

portal3_ip: {{ portals[2].mgmt_ip }}

{% endif %}

{% endif %}
