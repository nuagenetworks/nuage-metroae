# *** WARNING ***
# This is a generated file. Manual changes to this file
# will be lost if reset-build or build is run
#
component_type: portal_grcn

required_bridges:
  - mgmt

target_server_type: {{ item.target_server_type | default('kvm') }}
hostname: {{ item.hostname }}
target_server: {{ item.target_server }}

{% if item.vmname is defined %}
vmname: {{ item.vmname }}
{% else %}
vmname: {{ item.hostname }}
{% endif %}

image_path: {{ image_path | default("MISSING") }}
image_file_name: {{ image_file_name | default("MISSING") }}

{% if portals|length == 1%}
portal_sa_or_ha: sa
{% else %}
portal_sa_or_ha: ha
{% endif %}

mgmt_ip: {{ item.mgmt_ip }}
mgmt_prefix: {{ item.mgmt_ip_prefix | default(24) }}
mgmt_gateway: {{ item.mgmt_gateway }}

vsd_fqdn: {{ common.vsd_fqdn_global }}

{% if item.cpuset is defined %}
cpuset:
{% for cpus in item.cpuset %}
  - {{ cpus }}
{% endfor %}
{% endif %}

{% if portal_path is defined %}
portal_path: {{ portal_path }}
{% endif %}
{% if portal_file_name is defined %}
portal_file_name: {{ portal_file_name }}
{% endif %}
{% if item.portal_version is defined %}
portal_version: {{ item.portal_version }}
{% endif %}

{%- if item.preserve_vm is defined %}
preserve_vm: {{ item.preserve_vm }}
{%- endif %}

current_dc: {{ item.current_dc }}
other_dc_portal1_ip: {{ item.other_dc_portal1_ip }}
other_dc_portal2_ip: {{ item.other_dc_portal2_ip }}
other_dc_portal3_ip: {{ item.other_dc_portal3_ip }}
other_dc_grcn_ip: {{ item.other_dc_grcn_ip }}
