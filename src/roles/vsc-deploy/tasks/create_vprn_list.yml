- name: Form VPRN object
  set_fact:
    vprn_obj: [{
      "vlan": "{{ vprn.split(':')[0] }}",
      "ipaddr": "{{ '' if vprn.split(':') | length <= 1 else vprn.split(':')[1].split('/')[0] }}",
      "netmask_length": "{{ '24' if (vprn.split(':') | length <= 1 or vprn.split(':')[1].split('/') | length <= 1) else vprn.split(':')[1].split('/')[1] }}",
      "nexthop": "{{ '' if (vprn.split(':') | length <= 2) else vprn.split(':')[2] }}"
      "interface_name": "{{ '' if (vprn.split(':') | length <= 3) else vprn.split(':')[3].split('=')[1] }}",
      "as_number": "{{ '' if (vprn.split(':') | length <= 4) else vprn.split(':')[4].split('=')[1] }}",
      "customer_ip": "{{ '' if (vprn.split(':') | length <= 5) else vprn.split(':')[5].split('=')[1] }}"
    }]

- name: Add VPRN object to the object list
  set_fact:
    vprn_object_list: '{{ vprn_object_list + vprn_obj }}'
