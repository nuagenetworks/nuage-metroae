###############################################################################
#  Virtualized Service Router
#
# Specify configuration for Nuage VSRs
#
# Automatically generated by {{ generator_script | default("script") }}.
#

{% if vsrs is defined and vsrs %}
{% for item in vsrs %}
#
# VSR {{ loop.index }}
#
-
    ##### Host and target server

    # < Hostname >
    # Hostname to apply to the VSR VM
    #
    {%- if item.hostname is defined %}
    hostname: "{{ item.hostname }}"
    {%- else %}
    # hostname: ""
    {%- endif %}

    # < VM name >
    # VM name to use for the VSR VM
    #
    {%- if item.vname is defined %}
    vname: "{{ item.vname }}"
    {%- else %}
    # vname: (Hostname)
    {%- endif %}

    # < Target Server Type >
    # Type of hypervisor environment into which the instance will be created
    # (kvm) 
    #
    target_server_type: "{{ item.target_server_type }}"

    # < Target Server IP or FQDN >
    # Hostname or IP address of the KVM hypervisor where the VSR VM will be instantiated
    #
    target_server: "{{ item.target_server }}"

    ############################

    ##### Management network

    # < Management IP Address >
    # IP address to apply to the management interface of the VSR VM
    #
    mgmt_ip: "{{ item.mgmt_ip }}"

    # < Management Network Gateway >
    # Network gateway of the management network for the VSR VM
    #
    mgmt_gateway: "{{ item.mgmt_gateway }}"

    # < Management Network Mask Prefix Length >
    # Management network mask prefix length for the VSR VM
    #
    mgmt_netmask_prefix: {{ item.mgmt_netmask_prefix }}

    # < Management Static Route List >
    # Static routes to apply to the management network for the VSR VM
    #
    {%- if item.mgmt_static_route_list is defined %}
    mgmt_static_route_list: [ {% for i in item.mgmt_static_route_list | default([]) %}"{{ i }}", {% endfor %}]
    {%- else %}
    # mgmt_static_route_list: []
    {%- endif %}

    # < Management to Hypervisor Bridge >
    #
    {%- if item.mgmt_to_hv_bridge is defined %}
    mgmt_to_hv_bridge: "{{ item.mgmt_to_hv_bridge }}"
    {%- else %}
    # mgmt_to_hv_bridge: ""
    {%- endif %}

    # < Port to Hypervisor Bridges >
    #
    {%- if item.ports_to_hv_bridges is defined %}
    ports_to_hv_bridges: [ {% for i in item.ports_to_hv_bridges | default([]) %}"{{ i }}", {% endfor %}]
    {%- else %}
    # ports_to_hv_bridges: []
    {%- endif %}

    ########################

    ##### System and Data IP

    # < System IP >
    # IP address to apply to the system network interface for the VSR VM
    #
    {%- if item.system_ip is defined %}
    system_ip: "{{ item.system_ip }}"
    {%- else %}
    # system_ip: ""
    {%- endif %}

    # < Data IP >
    # IP address to apply to the data network interface for the VSR VM. Use format IP Address/Netmask
    #
    {%- if item.data_ip is defined %}
    data_ip: "{{ item.data_ip }}"
    {%- else %}
    # data_ip: ""
    {%- endif %}

    ########################

    ##### System configuration

    # < License File >
    # Location of the VSR license file
    #
    {%- if item.license_file is defined %}
    license_file: "{{ item.license_file }}"
    {%- else %}
    # license_file: ""
    {%- endif %}

    # < Remote License File Location >
    # Optional location of the VSR license file on the remote ftp or tftp location
    #
    {%- if item.remote_license_file_location is defined %}
    remote_license_file_location: "{{ item.remote_license_file_location }}"
    {%- else %}
    # remote_license_file_location: ""
    {%- endif %}

    # < Deploy Configuration File >
    #
    {%- if item.deploy_cfg_file is defined %}
    deploy_cfg_file: "{{ item.deploy_cfg_file }}"
    {%- else %}
    # deploy_cfg_file: ""
    {%- endif %}

    # < Config File Directory >
    #
    {%- if item.config_file_directory is defined %}
    config_file_directory: "{{ item.config_file_directory }}"
    {%- else %}
    # config_file_directory: ""
    {%- endif %}

    # < Credentials set name >
    # Name of the credentials set for the vsd
    #
    {%- if item.credentials_set is defined %}
    credentials_set: "{{ item.credentials_set }}"
    {%- else %}
    # credentials_set: ""
    {%- endif %}

    ##########################

{% endfor %}
{% else %}
[ ]
{% endif %}
