###############################################################################
# Nuage Utility Host External Interfaces List
#
# Configuration for external interfaces for NUH
#
# Automatically generated by {{ generator_script | default("script") }}.
#

{% if nuh_external_interfaces is defined and nuh_external_interfaces %}
{% for item in nuh_external_interfaces %}
#
# ExternalInterface {{ loop.index }}
#
-
    ##### External Network

    # < NUH external network name >
    # Name of the external network for NUH
    #
    name: "{{ item.name }}"

    # < External Network IP address >
    # IP address of the external network interface. This network is the one where NSGs reside
    #
    external_ip: "{{ item.external_ip }}"

    # < External Network IP Prefix Length >
    # IP Prefix length for the external network
    #
    {%- if item.external_ip_prefix is defined %}
    external_ip_prefix: {{ item.external_ip_prefix }}
    {%- else %}
    # external_ip_prefix: 0
    {%- endif %}

    # < External Network Gateway IP >
    # IP address of the gateway on the external network
    #
    external_gateway: "{{ item.external_gateway }}"

    # < External Network VLAN ID >
    # Optional VLAN ID for external network. Must be unique per external interface. If unspecified, VLAN is unassigned and only one external interface can be used
    #
    {%- if item.vlan is defined %}
    vlan: {{ item.vlan }}
    {%- else %}
    # vlan: 0
    {%- endif %}

    # < External FQDN Name >
    # Optional External FQDN name. A valid cert of this FQDN will be generated from the VSD and transferred to NUH
    #
    external_fqdn: "{{ item.external_fqdn }}"

    # < External Network Bridge >
    # Network Bridge used for the external network on the NUH. This will be a Linux network bridge when deploying on KVM. Defaults to using access bridge
    #
    {%- if item.external_bridge is defined %}
    external_bridge: "{{ item.external_bridge }}"
    {%- else %}
    # external_bridge: (access bridge)
    {%- endif %}

    # < Distributed vSwitch Name >
    # Name of the distrubuted vSwitch. Required to identify correct distributed portgroup, if there are multiple of the same name.
    #
    {%- if item.dvswitch_name is defined %}
    dvswitch_name: "{{ item.dvswitch_name }}"
    {%- else %}
    # dvswitch_name: ""
    {%- endif %}

    ######################

{% endfor %}
{% else %}
[ ]
{% endif %}
