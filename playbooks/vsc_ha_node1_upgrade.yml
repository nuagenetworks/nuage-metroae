---
- hosts: vscs
  gather_facts: no
  serial: 1
  connection: local
  any_errors_fatal: true
  vars:
    report_filename: vsc_node1_pre_upgrade_report.txt
  roles:
    - vsc-health

- hosts: vsc_node1
  gather_facts: no
  roles:
    - vsc-upgrade
  vars:
    vsc_username: "{{ vsc_custom_username | default(vsc_default_username) }}"
    vsc_password: "{{ vsc_custom_password | default(vsc_default_password) }}"

- hosts: vscs
  gather_facts: no
  serial: 1
  connection: local
  any_errors_fatal: true
  vars:
    report_filename: vsc_node1_post_upgrade_report.txt
    vsc_username: "{{ vsc_custom_username | default(vsc_default_username) }}"
    vsc_password: "{{ vsc_custom_password | default(vsc_default_password) }}"
  roles:
    - vsc-health
