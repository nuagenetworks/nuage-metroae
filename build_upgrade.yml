---
- hosts: localhost
  
  pre_tasks:
    - name: Include build variable files
      include_vars: "{{ build_vars_file | default ('build_vars.yml') }}"
    - name: Include upgrade variable fils
      include_vars: "{{ upgrade_build_vars_file | default ('upgrade_build_vars.yml') }}"
    - name: Include user credential file
      include_vars: user_creds.yml

  roles:
    - nuage-predeploy
    - validate-build-vars
    - build-upgrade
